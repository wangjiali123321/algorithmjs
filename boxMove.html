<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>实现方块的拖拽</title>
    <style type="text/css">

        #box1{
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
        }

        #box2{
            width: 100px;
            height: 100px;
            background-color: yellow;
            position: absolute;

            left: 200px;
            top: 200px;
        }
    </style>

    <script type="text/javascript">
        /**
         * 实现方块的拖拽主要有三个步骤：
         * 1、给方块绑定鼠标点击事件，当鼠标按下的时候，才能触发方块的移动效果；
         * 2、在鼠标按下的情况下，鼠标移动时，方块跟随鼠标的移动；
         * 3、当鼠标松开时，方块随之停止移动
         */
        window.onload = function () {
            var box1 = document.getElementById("box1");
            box1.onmousedown = function (event) {//在鼠标按下时触发
                event = event || window.event;
                console.log('clientX',event.clientX,'clientY',event.clientY,'box1.offsetLeft',box1.offsetLeft,'box1.offsetTop',box1.offsetTop)
                var ol = event.clientX - box1.offsetLeft;//记录下方块相对于左边的偏移量
                var ot = event.clientY - box1.offsetTop;//记录下方块相对于顶部的偏移量
                console.log('ol',ol,'ot',ot)

                document.onmousemove = function (event) {
                    event = event || window.event;
                    var left = event.clientX - ol;//这是方块的横向偏移量
                    var top = event.clientY - ot;//这是方块纵向的偏移量

                    console.log('left',left,'top',top)

                    box1.style.left = left + "px";
                    box1.style.top = top + "px";
                }

                document.onmouseup = function () {
                    document.onmousemove = null;//鼠标松开之后，就停止移动
                    document.onmouseup = null;//鼠标松开后同时将松开事件置位空
                }
            }
        }
    </script>
</head>
<body>
<div id="box1"></div>

<div id="box2"></div>
</body>
</html>